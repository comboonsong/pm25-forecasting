# Background Data and Null Filling Strategy

## **Overview**
This background data is generated by averaging all available data in a local store, which is used for filling null values during the data ingestion process.

## **Remarks**
### **File: `background_data_20250216.csv`**
1. **PM10 is not recommended** due to a large gap of missing data (**50% missing before forward filling**).
2. **Averaging period:** March 2023 - December 2024, with most data sourced from `"เขตคลองเตย"`.
3. **Significant missing data:** January 27, 15:00 - January 28, 00:00.
4. **Forward fill (`ffill`) applied** to fill missing values within this period.

---

## **Visualization of Forward Filling**

```python
import pandas as pd
import matplotlib.pyplot as plt

# Load background data
background_df = pd.read_csv("background_data_20250216.csv")

# Convert datetime column to datetime format
background_df['datetime'] = pd.to_datetime(background_df['datetime'])

# Sort data before applying forward fill
background_df = background_df.sort_values(by='datetime')

# Apply forward fill
background_df.ffill(inplace=True)

# Define the date range for visualization
start_date = "2024-01-27"
end_date = "2024-01-29"

# Filter the DataFrame by date range
df_filtered = background_df[
    (background_df['datetime'] >= start_date) & (background_df['datetime'] <= end_date)
]

# Plot the filtered data
plt.figure(figsize=(20, 10))  # Adjust figure size
plt.plot(df_filtered['datetime'], df_filtered['PM2.5'], marker='o', linestyle='-')
plt.xlabel("Datetime")
plt.ylabel("PM2.5 Level")
plt.title(f"PM2.5 Levels from {start_date} to {end_date}")
plt.xticks(rotation=45)  # Rotate x-axis labels for better readability
plt.grid(True)  # Add grid for better visualization
plt.show()
